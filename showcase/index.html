<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>
  <meta http-equiv='X-UA-Compatible' content='IE=edge'>
  <title>Page Title</title>
  <meta name='viewport' content='width=device-width, initial-scale=1'>
  <link rel='stylesheet' type='text/css' media='screen' href='main.css'>
  <script type="module">
    import CastLess from '../index.js'

    const cst = new CastLess('https://thaunknown.github.io/castless/showcase/rec.html')
    start.onclick = () => {
      if (cst.canCast) {
        cst.start()
      } else {
        cst.onavailabilitychange = ({ detail }) => {
          if (detail) cst.start()
        }
      }
    }
    cst.addEventListener('connected', ({ detail }) => {
      console.log('connected')
      send.onclick = () => {
        console.log('sending', text.value)
        detail.dataChannel.send(text.value)
      }
    })
  </script>
</head>
<body>
  <button id="start">Start</button>
  <input type="text" id="text">
  <button id="send">Send</button>
</body>
</html>